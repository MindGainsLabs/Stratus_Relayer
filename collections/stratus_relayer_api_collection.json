{
  "info": {
    "name": "Stratus Relayer API Collection - Complete",
    "description": "Collection completa da API do Stratus_Relayer v1.0.0 - Sistema de an√°lise de tokens, extra√ß√£o de mensagens do Discord e formata√ß√£o para Telegram com suporte a SSE",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üîê Autentica√ß√£o",
      "description": "Endpoints relacionados √† autentica√ß√£o de tokens API",
      "item": [
        {
          "name": "Verificar Token",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/ping",
              "host": ["{{baseUrl}}"],
              "path": ["ping"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}",
                "description": "Token de autentica√ß√£o"
              }
            ],
            "description": "Verifica se o token de API √© v√°lido e se o servi√ßo est√° online"
          },
          "response": [
            {
              "name": "Token V√°lido",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "valid-token"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ping",
                  "host": ["{{baseUrl}}"],
                  "path": ["ping"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"message\": \"API is online\",\n  \"timestamp\": \"2024-01-15T10:30:00.000Z\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "üì® Mensagens Discord",
      "description": "Endpoints para extra√ß√£o, processamento e download de mensagens do Discord",
      "item": [
        {
          "name": "Extrair Mensagens",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/retrieve-messages",
              "host": ["{{baseUrl}}"],
              "path": ["api", "retrieve-messages"]
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"channelId\": \"{{channelId}}\",\n  \"hours\": 24,\n  \"channelId1\": \"{{channelId1}}\",\n  \"channelId2\": \"{{channelId2}}\",\n  \"channelId3\": \"{{channelId3}}\"\n}"
            },
            "description": "Extrai mensagens de m√∫ltiplos canais do Discord e processa automaticamente tokens encontrados"
          },
          "response": [
            {
              "name": "Mensagens Extra√≠das",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "valid-token"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"hours\": 24\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/retrieve-messages",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "retrieve-messages"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"message\": \"Mensagens coletadas com sucesso.\",\n  \"data\": [\n    {\n      \"id\": \"123456789\",\n      \"username\": \"trader_wallet\",\n      \"content\": \"BUY SOL transaction...\",\n      \"timestamp\": \"2024-01-15T10:25:00.000Z\",\n      \"tokenInfo\": {\n        \"symbol\": \"SOL\",\n        \"id\": \"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E\",\n        \"marketCap\": \"$45.2M\"\n      }\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Baixar Mensagens",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/download-messages",
              "host": ["{{baseUrl}}"],
              "path": ["api", "download-messages"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "description": "Baixa todas as mensagens coletadas em formato texto estruturado"
          },
          "response": []
        }
      ]
    },
    {
      "name": "ü™ô An√°lise de Criptomoedas",
      "description": "Endpoints para rastreamento, an√°lise e estat√≠sticas de tokens",
      "item": [
        {
          "name": "Dados Estruturados de Crypto",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/crypto/structured-data",
              "host": ["{{baseUrl}}"],
              "path": ["api", "crypto", "structured-data"]
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hours\": 24,\n  \"tokenSymbol\": \"SOL\",\n  \"walletName\": \"whale_wallet\",\n  \"channelId\": \"{{channelId}}\"\n}"
            },
            "description": "Obt√©m dados estruturados de rastreamento de criptomoedas com an√°lise de tokens e carteiras"
          },
          "response": [
            {
              "name": "Dados Crypto Estruturados",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "valid-token"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"hours\": 24\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/crypto/structured-data",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "crypto", "structured-data"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"message\": \"Crypto tracking data retrieved successfully\",\n  \"data\": {\n    \"trackedMessages\": [\n      {\n        \"messageId\": \"123456789\",\n        \"timestamp\": \"2024-01-15T10:25:00.000Z\",\n        \"author\": \"trader_wallet\",\n        \"token\": {\n          \"symbol\": \"SOL\",\n          \"id\": \"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E\",\n          \"marketCap\": \"$45.2M\"\n        },\n        \"meta\": {\n          \"totalSol\": 150.5,\n          \"walletsCount\": 3,\n          \"timeframe\": \"2 hours\"\n        },\n        \"riskReport\": {\n          \"score\": 25,\n          \"risks\": []\n        }\n      }\n    ],\n    \"stats\": {\n      \"tokens\": {\n        \"SOL\": {\n          \"totalSol\": 150.5,\n          \"mentions\": 5,\n          \"uniqueWallets\": 3,\n          \"riskScore\": 25\n        }\n      },\n      \"totalSol\": 150.5\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Estat√≠sticas de Tokens",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/crypto/token-stats?hours=24",
              "host": ["{{baseUrl}}"],
              "path": ["api", "crypto", "token-stats"],
              "query": [
                {
                  "key": "hours",
                  "value": "24",
                  "description": "Per√≠odo em horas para an√°lise"
                }
              ]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "description": "Obt√©m estat√≠sticas resumidas sobre tokens processados"
          },
          "response": []
        },
        {
          "name": "Buscar Tokens",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/crypto/search?query=SOL&hours=24",
              "host": ["{{baseUrl}}"],
              "path": ["api", "crypto", "search"],
              "query": [
                {
                  "key": "query",
                  "value": "SOL",
                  "description": "Termo de busca (s√≠mbolo ou ID do token)"
                },
                {
                  "key": "hours",
                  "value": "24",
                  "description": "Per√≠odo em horas para busca"
                }
              ]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "description": "Busca tokens por s√≠mbolo ou ID parcial"
          },
          "response": []
        },
        {
          "name": "Top Tokens",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/crypto/top-tokens?metric=totalSol&hours=24&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "crypto", "top-tokens"],
              "query": [
                {
                  "key": "metric",
                  "value": "totalSol",
                  "description": "M√©trica para classifica√ß√£o: totalSol, mentions, uniqueWallets, riskScore"
                },
                {
                  "key": "hours",
                  "value": "24",
                  "description": "Per√≠odo em horas"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "N√∫mero de resultados"
                }
              ]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "description": "Obt√©m os principais tokens classificados pela m√©trica especificada"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üì° Server-Sent Events (SSE)",
      "description": "Endpoint para atualiza√ß√µes em tempo real via SSE",
      "item": [
        {
          "name": "Stream SSE",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/sse/stream",
              "host": ["{{baseUrl}}"],
              "path": ["sse", "stream"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              },
              {
                "key": "Accept",
                "value": "text/event-stream"
              },
              {
                "key": "Cache-Control",
                "value": "no-cache"
              }
            ],
            "description": "Conecta ao stream SSE para receber mensagens processadas em tempo real"
          },
          "response": [
            {
              "name": "SSE Stream Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "valid-token"
                  },
                  {
                    "key": "Accept",
                    "value": "text/event-stream"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/sse/stream",
                  "host": ["{{baseUrl}}"],
                  "path": ["sse", "stream"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/event-stream"
                },
                {
                  "key": "Cache-Control",
                  "value": "no-cache"
                },
                {
                  "key": "Connection",
                  "value": "keep-alive"
                }
              ],
              "cookie": [],
              "body": "data: [{\"id\":\"123\",\"username\":\"trader\",\"content\":\"BUY SOL...\",\"timestamp\":\"2024-01-15T10:30:00.000Z\"}]\n\n"
            }
          ]
        }
      ]
    },
    {
      "name": "üìö Documenta√ß√£o",
      "description": "Endpoints para acessar documenta√ß√£o da API e WebSocket",
      "item": [
        {
          "name": "Documenta√ß√£o WebSocket HTML",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/docs/websocket",
              "host": ["{{baseUrl}}"],
              "path": ["docs", "websocket"]
            },
            "description": "Visualiza documenta√ß√£o AsyncAPI dos WebSockets em formato HTML"
          },
          "response": []
        },
        {
          "name": "AsyncAPI YAML",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/docs/websocket/yaml",
              "host": ["{{baseUrl}}"],
              "path": ["docs", "websocket", "yaml"]
            },
            "description": "Baixa especifica√ß√£o AsyncAPI em formato YAML para WebSockets"
          },
          "response": []
        },
        {
          "name": "AsyncAPI Markdown",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/docs/websocket/markdown",
              "host": ["{{baseUrl}}"],
              "path": ["docs", "websocket", "markdown"]
            },
            "description": "Baixa documenta√ß√£o AsyncAPI em formato Markdown"
          },
          "response": []
        },
        {
          "name": "Informa√ß√µes da Integra√ß√£o AsyncAPI",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/docs/websocket/info",
              "host": ["{{baseUrl}}"],
              "path": ["docs", "websocket", "info"]
            },
            "description": "Obt√©m informa√ß√µes sobre integra√ß√£o AsyncAPI e ferramentas dispon√≠veis"
          },
          "response": []
        },
        {
          "name": "Swagger UI - API REST",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api-docs",
              "host": ["{{baseUrl}}"],
              "path": ["api-docs"]
            },
            "description": "Acessa documenta√ß√£o interativa Swagger da API REST"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîß Sistema & Monitoramento",
      "description": "Endpoints para verifica√ß√£o de status e monitoramento do sistema",
      "item": [
        {
          "name": "Status do Sistema",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/ping",
              "host": ["{{baseUrl}}"],
              "path": ["ping"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{apiToken}}"
              }
            ],
            "description": "Verifica se a API est√° online e funcionando"
          },
          "response": []
        },
        {
          "name": "Dashboard Principal",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            },
            "description": "Acessa o dashboard principal da aplica√ß√£o"
          },
          "response": []
        },
        {
          "name": "Dashboard WebSocket",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/websocket-dashboard.html",
              "host": ["{{baseUrl}}"],
              "path": ["websocket-dashboard.html"]
            },
            "description": "Acessa dashboard interativo para testar conex√µes WebSocket"
          },
          "response": []
        },
        {
          "name": "Dashboard SSE",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/SSE.html",
              "host": ["{{baseUrl}}"],
              "path": ["SSE.html"]
            },
            "description": "Acessa dashboard para monitorar streams SSE em tempo real"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://srv800316.hstgr.cloud:8081",
      "type": "string",
      "description": "URL base da API em produ√ß√£o"
    },
    {
      "key": "localUrl",
      "value": "http://localhost:8081",
      "type": "string",
      "description": "URL base da API local para desenvolvimento"
    },
    {
      "key": "apiToken",
      "value": "your-api-token-here",
      "type": "string",
      "description": "Token de autentica√ß√£o da API"
    },
    {
      "key": "channelId",
      "value": "123456789012345678",
      "type": "string",
      "description": "ID do canal principal do Discord"
    },
    {
      "key": "channelId1",
      "value": "123456789012345678",
      "type": "string",
      "description": "ID do primeiro canal do Discord"
    },
    {
      "key": "channelId2",
      "value": "123456789012345679",
      "type": "string",
      "description": "ID do segundo canal do Discord"
    },
    {
      "key": "channelId3",
      "value": "123456789012345680",
      "type": "string",
      "description": "ID do terceiro canal do Discord"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Configura√ß√µes autom√°ticas para requests",
          "if (!pm.environment.get('apiToken')) {",
          "    console.log('‚ö†Ô∏è  Configure seu token de API nas vari√°veis de ambiente');",
          "}",
          "",
          "// Log da request",
          "console.log('üöÄ Executando:', pm.info.requestName);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Testes autom√°ticos b√°sicos",
          "pm.test('Status code √© sucessful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
          "});",
          "",
          "pm.test('Response time √© menor que 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "// Para responses JSON",
          "if (pm.response.headers.get('Content-Type')?.includes('application/json')) {",
          "    pm.test('Response √© JSON v√°lido', function () {",
          "        pm.response.to.be.json;",
          "    });",
          "}"
        ]
      }
    }
  ]
}
